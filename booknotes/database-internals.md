《数据库系统内幕》读书笔记


## 第一章

数据库的组成：

1. 接受请求的传输层
2. 决定以最高效方式运行查询的查询处理器
3. 执行操作的执行引擎
4. 存储引擎

数据库分为三大类

1. 联机事务处理数据库 OnLine Transaction Processing（OLTP）。比如 MySQL
2. 联机分析处理数据库 OnLine Analytical Procssing（OLAP）。比如 ClickHouse
3. 混合事务和分析处理数据库 Hybrid Transaction Analytical Processing（HTAP）。综合了以上两种数据库

二级索引可以直接指向数据记录，也可以简单地存储主键。InnoDB 的二级索引就会利用到主索引。

聚簇索引和非聚簇索引

如果数据记录存储按照主键顺序，则称为聚簇索引，否则称为非聚簇索引

## 第二章

- 为什么二叉搜索树不适用于硬盘？

    二叉搜索树需要经常进行平衡操作，在硬盘上不切实际。元素是按随机顺序添加的，可能导致跨越子节点多个磁盘页。二叉树的高度较高。

- B+树的优势

    增加节点扇出、减少树高和节点指针数量、降低平衡操作的数量。

顺序 IO 将会从磁盘读取和写入连续的存储段。虽然 SSD 可以进行随机读写，但是 SSD 依然是块设备。对于块设备来说，当我们读取单个字的时候，包含他的整个块都会被读取。

B+树仅在叶节点中存储值，内部节点仅用于分隔键。

B+树的分裂是自下而上的，如果一直传播到了根节点，那么就需要分裂根节点，同时树的高度就会增加。