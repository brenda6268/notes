# 浅谈 MySQL 的水平拓展

传统意义上，我们可以进行如下操作来水平拓展 MySQL：

0. 主从复制，读写分离
1. 分库分表

## 主从复制

## 分库分表

### 垂直拆分

1. 拆表。表中字段太多了，比如说有几百个，把这个表不同的字段分成好几个表。一般是把不常用的较大的字段放到扩展表中去。
2. 拆库。库中的表太多了，把不同的表分到不同的库中去。比如说把 Product、User、Order 放到不同的库中。

### 水平拆分

如果一个表实在太大了，把这个表分成几段放到不同的库中去，切分的原则一般有以下几种：

1. Range 切分。比如说 1-10000 在一个表中，10001-20000 在一个表中
2. Hash 切分。比如说 id 取模后切分
3. 地理区域切分。
4. 按照时间切分。一般来说历史越久远的数据访问的可能性也越小，这样也做到了冷热分离。

### 分库分表带来的问题

1. 路由，由于数据在不同的库中，因此需要有一个路由找到正确的库。这时候又分成了客户端路由和中间件路由两种。
2. 跨库事务如何实现？
3. 跨库 join，group by 等查询如何实现？这里其实还是要分在客户端来做还是在中间件来做两种。

## Vitess

## NoSQL
复杂查询采用 ES 等，不再使用 MySQL 

## 参考资料

1. https://juejin.im/entry/5b5eb7f2e51d4519700f7d3c
2. https://jixiuf.github.io/blog/go_vitess.html/